<template>
    <div class="container">
        <div class="uploader">
            <div class="flex">
                <lightning-input 
                type="file" 
                label="Upload license file" 
                accept=".jpg,.jpeg,.png,.gif,.bmp,.pdf,.doc,.docx" 
                onchange={handleFileChange}
                variant="label-hidden">
            </lightning-input>
            <div class="actions">
                <lightning-button 
                    variant="brand" 
                    label="Scan document" 
                    onclick={handleScan} 
                    disabled={isScanDisabled}>
                </lightning-button>
            </div>
            </div>
            <!-- Универсальный блок для отображения файла -->
            <template if:true={hasFileToDisplay}>
                <div class="file-info">
                    <div class="file-icon">
                        <lightning-icon icon-name="doctype:image" size="small" if:true={isImageFile}></lightning-icon>
                        <lightning-icon icon-name="doctype:pdf" size="small" if:true={isPdfFile}></lightning-icon>
                        <lightning-icon icon-name="doctype:word" size="small" if:true={isOtherFile}></lightning-icon>
                    </div>
                    <div class="file-details">
                        <div class="file-name">{displayFileName}</div>
                        <div class="file-meta">
                            <span class="file-type">{displayFileType}</span>
                            <span class="file-size">({displayFileSize})</span>
                        </div>
                    </div>
                </div>
            </template>
        </div>
        
        
        
        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Scanning document..." size="medium"></lightning-spinner>
        </template>
        
        
        
        <template if:true={scannedName}>
            <div class="result">
                <span class="result-label">Extracted Name:</span>
                <span class="result-value">{scannedName}</span>
            </div>
        </template>
        
        <template if:true={errorMessage}>
            <div class="error">
                <lightning-icon icon-name="utility:error" size="x-small"></lightning-icon>
                <span>{errorMessage}</span>
            </div>
        </template>
    </div>
</template> 