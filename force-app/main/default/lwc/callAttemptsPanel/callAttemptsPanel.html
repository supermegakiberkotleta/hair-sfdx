<template>
    <div class="panel-container">
        <!-- Селект кампаний -->
        <div class="slds-p-around_small">
            <lightning-combobox
                name="campaign"
                label="Campaign"
                value={selectedCampaignId}
                placeholder="Select campaign"
                options={campaigns}
                onchange={handleCampaignChange}
                variant="label-hidden">
            </lightning-combobox>
        </div>

        <!-- Загрузка -->
        <template if:true={isLoading}>
            <div class="slds-text-align_center slds-p-around_medium">
                <lightning-spinner 
                    alternative-text="Loading..." 
                    size="medium">
                </lightning-spinner>
            </div>
        </template>

        <!-- Ошибка -->
        <template if:true={error}>
            <div class="slds-text-align_center slds-p-around_medium">
                <div class="slds-text-color_error">
                    <lightning-icon 
                        icon-name="utility:error" 
                        size="small" 
                        variant="error"
                        class="slds-m-right_small">
                    </lightning-icon>
                    {error}
                </div>
            </div>
        </template>

        <!-- Iframe -->
        <template if:true={showIframe}>
            <div class="iframe-container">
                <iframe
                    src={iframeUrl}
                    title="Call Attempts"
                    class="call-attempts-iframe"
                    onload={handleIframeLoad}
                    onerror={handleIframeError}
                    sandbox="allow-scripts allow-same-origin allow-forms">
                </iframe>
            </div>
        </template>
    </div>
</template>
